/* automatically generated by JSCoverage - do not edit */
try {
  if (typeof top === 'object' && top !== null && typeof top.opener === 'object' && top.opener !== null) {
    // this is a browser window that was opened from another window

    if (! top.opener._$jscoverage) {
      top.opener._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null) {
    // this is a browser window

    try {
      if (typeof top.opener === 'object' && top.opener !== null && top.opener._$jscoverage) {
        top._$jscoverage = top.opener._$jscoverage;
      }
    }
    catch (e) {}

    if (! top._$jscoverage) {
      top._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null && top._$jscoverage) {
    _$jscoverage = top._$jscoverage;
  }
}
catch (e) {}
if (typeof _$jscoverage !== 'object') {
  _$jscoverage = {};
}
if (! _$jscoverage['requestHandlers.js']) {
  _$jscoverage['requestHandlers.js'] = [];
  _$jscoverage['requestHandlers.js'][1] = 0;
  _$jscoverage['requestHandlers.js'][3] = 0;
  _$jscoverage['requestHandlers.js'][4] = 0;
  _$jscoverage['requestHandlers.js'][5] = 0;
  _$jscoverage['requestHandlers.js'][6] = 0;
  _$jscoverage['requestHandlers.js'][7] = 0;
  _$jscoverage['requestHandlers.js'][11] = 0;
  _$jscoverage['requestHandlers.js'][12] = 0;
  _$jscoverage['requestHandlers.js'][13] = 0;
  _$jscoverage['requestHandlers.js'][14] = 0;
  _$jscoverage['requestHandlers.js'][15] = 0;
  _$jscoverage['requestHandlers.js'][16] = 0;
  _$jscoverage['requestHandlers.js'][17] = 0;
  _$jscoverage['requestHandlers.js'][20] = 0;
  _$jscoverage['requestHandlers.js'][25] = 0;
  _$jscoverage['requestHandlers.js'][26] = 0;
  _$jscoverage['requestHandlers.js'][27] = 0;
  _$jscoverage['requestHandlers.js'][28] = 0;
  _$jscoverage['requestHandlers.js'][29] = 0;
  _$jscoverage['requestHandlers.js'][33] = 0;
  _$jscoverage['requestHandlers.js'][34] = 0;
  _$jscoverage['requestHandlers.js'][35] = 0;
  _$jscoverage['requestHandlers.js'][36] = 0;
  _$jscoverage['requestHandlers.js'][41] = 0;
  _$jscoverage['requestHandlers.js'][42] = 0;
  _$jscoverage['requestHandlers.js'][43] = 0;
}
_$jscoverage['requestHandlers.js'].source = ["<span class=\"k\">var</span> db <span class=\"k\">=</span> require<span class=\"k\">(</span><span class=\"s\">'./db'</span><span class=\"k\">);</span>","","<span class=\"k\">function</span> save<span class=\"k\">(</span>response<span class=\"k\">,</span> urlParts<span class=\"k\">)</span><span class=\"k\">{</span>   ","    db<span class=\"k\">.</span>addPost<span class=\"k\">(</span>response<span class=\"k\">,</span> urlParts<span class=\"k\">.</span>query<span class=\"k\">[</span><span class=\"s\">'POST'</span><span class=\"k\">],</span> <span class=\"k\">function</span><span class=\"k\">(</span>msg<span class=\"k\">)</span><span class=\"k\">{</span>","        response<span class=\"k\">.</span>writeHead<span class=\"k\">(</span><span class=\"s\">200</span><span class=\"k\">,</span>  <span class=\"k\">{</span><span class=\"s\">'Content-Type'</span><span class=\"k\">:</span><span class=\"s\">'text/html'</span><span class=\"k\">}</span><span class=\"k\">);</span>","        response<span class=\"k\">.</span>write<span class=\"k\">(</span>msg<span class=\"k\">);</span>","        response<span class=\"k\">.</span>end<span class=\"k\">();</span>","    <span class=\"k\">}</span><span class=\"k\">);</span>","<span class=\"k\">}</span>","","<span class=\"k\">function</span> flag<span class=\"k\">(</span>response<span class=\"k\">,</span> urlParts<span class=\"k\">)</span><span class=\"k\">{</span>","    <span class=\"k\">var</span> id <span class=\"k\">=</span> urlParts<span class=\"k\">.</span>query<span class=\"k\">[</span><span class=\"s\">'ID'</span><span class=\"k\">];</span>   ","    db<span class=\"k\">.</span>postRead<span class=\"k\">(</span>response<span class=\"k\">,</span> id<span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>idFound<span class=\"k\">)</span><span class=\"k\">{</span>","        <span class=\"k\">if</span> <span class=\"k\">(</span>idFound<span class=\"k\">)</span><span class=\"k\">{</span>","            response<span class=\"k\">.</span>writeHead<span class=\"k\">(</span><span class=\"s\">200</span><span class=\"k\">,</span> <span class=\"k\">{</span><span class=\"s\">'Content-Type'</span><span class=\"k\">:</span><span class=\"s\">'text/html'</span><span class=\"k\">}</span><span class=\"k\">);</span>","            response<span class=\"k\">.</span>write<span class=\"k\">(</span><span class=\"s\">\"Message \"</span> <span class=\"k\">+</span> id <span class=\"k\">+</span> <span class=\"s\">\" is now marked as read.\"</span><span class=\"k\">);</span>","            response<span class=\"k\">.</span>end<span class=\"k\">();</span>","        <span class=\"k\">}</span>","        <span class=\"k\">else</span> <span class=\"k\">{</span>","            error<span class=\"k\">(</span>response<span class=\"k\">);</span>","        <span class=\"k\">}</span>","    <span class=\"k\">}</span><span class=\"k\">);</span>","<span class=\"k\">}</span>","    ","<span class=\"k\">function</span> getAll<span class=\"k\">(</span>response<span class=\"k\">,</span> urlParts<span class=\"k\">)</span><span class=\"k\">{</span>","    response<span class=\"k\">.</span>writeHead<span class=\"k\">(</span><span class=\"s\">200</span><span class=\"k\">,</span> <span class=\"k\">{</span><span class=\"s\">'Content-Type'</span><span class=\"k\">:</span><span class=\"s\">'application/json'</span><span class=\"k\">}</span><span class=\"k\">);</span>","    db<span class=\"k\">.</span>listPosts<span class=\"k\">(</span>response<span class=\"k\">,</span> <span class=\"k\">function</span><span class=\"k\">(</span>posts<span class=\"k\">)</span><span class=\"k\">{</span>","        response<span class=\"k\">.</span>write<span class=\"k\">(</span>JSON<span class=\"k\">.</span>stringify<span class=\"k\">(</span>posts<span class=\"k\">));</span>","        response<span class=\"k\">.</span>end<span class=\"k\">();</span>","    <span class=\"k\">}</span><span class=\"k\">);</span>","<span class=\"k\">}</span>","","<span class=\"k\">function</span> error<span class=\"k\">(</span>response<span class=\"k\">)</span><span class=\"k\">{</span>","    response<span class=\"k\">.</span>writeHead<span class=\"k\">(</span><span class=\"s\">400</span><span class=\"k\">,</span> <span class=\"k\">{</span><span class=\"s\">'Content-Type'</span><span class=\"k\">:</span><span class=\"s\">'text/html'</span><span class=\"k\">}</span><span class=\"k\">);</span>","    response<span class=\"k\">.</span>write<span class=\"k\">(</span><span class=\"s\">\"400 Bad Request\"</span><span class=\"k\">);</span>","    response<span class=\"k\">.</span>end<span class=\"k\">();</span>","<span class=\"k\">}</span>","    ","","","exports<span class=\"k\">.</span>save <span class=\"k\">=</span> save<span class=\"k\">;</span>","exports<span class=\"k\">.</span>flag <span class=\"k\">=</span> flag<span class=\"k\">;</span>","exports<span class=\"k\">.</span>getAll <span class=\"k\">=</span> getAll<span class=\"k\">;</span>"];
_$jscoverage['requestHandlers.js'][1]++;
var db = require("./db");
_$jscoverage['requestHandlers.js'][3]++;
function save(response, urlParts) {
  _$jscoverage['requestHandlers.js'][4]++;
  db.addPost(response, urlParts.query.POST, (function (msg) {
  _$jscoverage['requestHandlers.js'][5]++;
  response.writeHead(200, {"Content-Type": "text/html"});
  _$jscoverage['requestHandlers.js'][6]++;
  response.write(msg);
  _$jscoverage['requestHandlers.js'][7]++;
  response.end();
}));
}
_$jscoverage['requestHandlers.js'][11]++;
function flag(response, urlParts) {
  _$jscoverage['requestHandlers.js'][12]++;
  var id = urlParts.query.ID;
  _$jscoverage['requestHandlers.js'][13]++;
  db.postRead(response, id, (function (idFound) {
  _$jscoverage['requestHandlers.js'][14]++;
  if (idFound) {
    _$jscoverage['requestHandlers.js'][15]++;
    response.writeHead(200, {"Content-Type": "text/html"});
    _$jscoverage['requestHandlers.js'][16]++;
    response.write(("Message " + id + " is now marked as read."));
    _$jscoverage['requestHandlers.js'][17]++;
    response.end();
  }
  else {
    _$jscoverage['requestHandlers.js'][20]++;
    error(response);
  }
}));
}
_$jscoverage['requestHandlers.js'][25]++;
function getAll(response, urlParts) {
  _$jscoverage['requestHandlers.js'][26]++;
  response.writeHead(200, {"Content-Type": "application/json"});
  _$jscoverage['requestHandlers.js'][27]++;
  db.listPosts(response, (function (posts) {
  _$jscoverage['requestHandlers.js'][28]++;
  response.write(JSON.stringify(posts));
  _$jscoverage['requestHandlers.js'][29]++;
  response.end();
}));
}
_$jscoverage['requestHandlers.js'][33]++;
function error(response) {
  _$jscoverage['requestHandlers.js'][34]++;
  response.writeHead(400, {"Content-Type": "text/html"});
  _$jscoverage['requestHandlers.js'][35]++;
  response.write("400 Bad Request");
  _$jscoverage['requestHandlers.js'][36]++;
  response.end();
}
_$jscoverage['requestHandlers.js'][41]++;
exports.save = save;
_$jscoverage['requestHandlers.js'][42]++;
exports.flag = flag;
_$jscoverage['requestHandlers.js'][43]++;
exports.getAll = getAll;
